:root {
    --radius: 12px;
    --line: var(--line);
    --card: var(--card);
    --text: var(--text);
    --text-weak: var(--text-weak);
    --brand: var(--brand);
    --brand-weak: var(--brand-weak);
  }
  * { box-sizing: border-box; }
  .memories-page {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
  .left, .right { min-width: 0; }
  .card {
    background: var(--card);
    border: 1px solid var(--line);
    border-radius: var(--radius);
    padding: 12px;
  }
  .header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
  }
  .title { display: flex; align-items: center; gap: 10px; }
  .title .dot {
    width: 10px; height: 10px; border-radius: 50%;
    background: var(--brand); box-shadow: 0 0 0 6px var(--brand-weak);
  }
  .title h2 { margin: 0; font-size: 16px; font-weight: 700; color: var(--text); }
  .tools { display: flex; align-items: center; gap: 8px; }
  .ghost-btn {
    height: 32px; padding: 0 10px; display: inline-flex; align-items: center; gap: 6px;
    border: 1px solid var(--line); border-radius: 10px; background: var(--card); color: var(--text);
  }
  .ghost-btn:hover { background: var(--brand-weak); border-color: #cfe8dc; color: var(--brand); }
  .ghost-btn.primary { color: #fff; background: var(--brand); border-color: #34c48a; }
  .ghost-btn.primary:hover { background: #34c48a; }
  .ghost-btn.small { height: 28px; padding: 0 8px; }
  .add-btn span { font-size: 14px; }
  
  .form { display: grid; gap: 10px; }
  .row { display: grid; gap: 6px; }
  .label { font-size: 12px; color: var(--text-weak); }
  .input {
    width: 100%; border: 1px solid var(--line); border-radius: 10px; padding: 8px 10px; font-size: 14px; color: var(--text);
    background: var(--card);
  }
  .actions { display: flex; gap: 8px; }
  
  .list { padding: 0; }
  .memory-list { list-style: none; margin: 0; padding: 0; display: grid; gap: 8px; }
  .memory-item {
    display: grid; grid-template-columns: 40px 1fr auto; gap: 10px; align-items: center;
    padding: 10px 12px; border: 1px solid var(--line); border-radius: 10px; background: #fff;
  }
  .memory-item:hover { background: #f7faf9; border-color: #e6f3ed; }
  .avatar {
    width: 36px; height: 36px; border-radius: 50%; background: var(--brand-weak);
    display: grid; place-items: center; color: var(--brand); font-weight: 700; font-size: 12px;
    background-size: cover; background-position: center;
  }
  .info .name { font-weight: 600; color: var(--text); }
  .info .desc { font-size: 13px; color: var(--text-weak); margin-top: 2px; }
  .info .meta { font-size: 12px; color: var(--text-weak); margin-top: 4px; }
  .ops { display: flex; align-items: center; gap: 6px; }
  .ops .text { font-size: 12px; }
  
  .right { overflow: hidden; }
  
  /* 抽屉 */
  .drawer {
    position: fixed;
    top: var(--header-h, 64px);
    right: 0;
    width: clamp(640px, 52vw, 980px);
    height: calc(100vh - var(--header-h, 64px));
    background: var(--card);
    border-left: 1px solid var(--line);
    box-shadow: -12px 0 28px rgba(0,0,0,.08);
    z-index: 60;
    display: grid;
    grid-template-rows: auto 1fr;
  }
  @supports (height: 100dvh) {
    .drawer {
      height: calc(100dvh - var(--header-h, 64px));
    }
  }
  @media (max-width: 768px) {
    .drawer {
      width: 100vw;
    }
  }
  .drawer-header {
    display: flex; align-items: center; justify-content: space-between; padding: 10px 12px; border-bottom: 1px solid var(--line);
  }
  .drawer-body { padding: 12px; overflow: auto; display: grid; gap: 12px; }
  .mem-brief { display: grid; grid-template-columns: 36px 1fr; gap: 10px; align-items: center; }
  .avatar.small { width: 32px; height: 32px; }
  .frag-list h4 { margin: 0 0 6px; font-size: 14px; color: var(--text); }
  .frag-item { border: 1px solid var(--line); border-radius: 10px; padding: 10px; display: grid; gap: 6px; background: #fff; }
  .frag-item .line { display: flex; gap: 8px; font-size: 12px; color: var(--text-weak); }
  .frag-item .desc { font-size: 14px; color: var(--text); white-space: pre-wrap; }
  .scene { font-size: 12px; color: var(--text-weak); }
  .hint { color: var(--text-weak); }
  
  /* 过渡 */
  .drawer-enter-active, .drawer-leave-active { transition: transform .22s ease, opacity .18s ease; }
  .drawer-enter-from, .drawer-leave-to { transform: translateX(8px); opacity: 0; }
  
  /* 响应式 */
  @media (max-width: 1024px) {
    .memories-page { grid-template-columns: 1fr; }
    .right { order: 2; }
  }


  /* 视觉优化覆盖：提升卡片质感、列表条目交互与右侧聊天布局适配 */

/* 布局与容器 */
.memories-page {
    grid-template-columns: 1.1fr 0.9fr;
    gap: 18px;
    min-height: calc(100vh - var(--header-h, 64px) - 160px);
  }
  .card {
    background: var(--card);
    border: 1px solid var(--line);
    border-radius: var(--radius);
    box-shadow: 0 6px 24px rgba(0,0,0,.06);
    transition: border-color .18s ease, box-shadow .18s ease, background .18s ease;
  }
  .header {
    padding: 10px 12px;
    border: 1px solid var(--line);
    border-radius: 12px;
    background: linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card), #000 4%));
  }
  
  /* 标题与按钮 */
  .title h2 { font-size: 18px; }
  .ghost-btn {
    height: 34px;
    padding: 0 12px;
  }
  .ghost-btn.primary {
    background: var(--brand);
    color: #fff;
    border-color: #34c48a;
  }
  .ghost-btn.primary:hover {
    background: #34c48a;
  }
  
  /* 列表与条目优化 */
  .memory-list { gap: 10px; }
  .memory-item {
    position: relative;
    grid-template-columns: 40px 1fr;
    padding: 12px;
    border-radius: 12px;
    background: var(--card);
    transition: background .18s ease, border-color .18s ease, transform .18s ease;
  }
  .memory-item:hover {
    border-color: #cfe8dc;
    background: var(--brand-weak);
    transform: translateY(-1px);
  }
  .avatar {
    box-shadow: 0 0 0 6px var(--brand-weak) inset;
  }
  .info .name { font-size: 15px; }
  .info .desc { font-size: 13px; color: var(--text-weak); }
  .info .meta { font-size: 12px; color: var(--text-weak); }
  
  /* 悬浮操作按钮：在条目右上角浮现 */
  .ops {
    position: absolute;
    top: 8px;
    right: 10px;
    display: inline-flex;
    gap: 6px;
    opacity: 0;
    transition: opacity .18s ease;
  }
  .memory-item:hover .ops { opacity: 1; }
  .ops .ghost-btn.small { background: var(--card); }
  .ops .ghost-btn.small:hover {
    background: var(--brand-weak);
    border-color: #cfe8dc;
    color: var(--brand);
  }
  
  /* 表单输入优化 */
  .input {
    background: var(--card);
    border: 1px solid var(--line);
  }
  .input:focus {
    outline: 2px solid var(--brand);
    outline-offset: 2px;
    border-color: #cfe8dc;
  }
  
  /* 右侧聊天承载容器：不下钻修改子组件，避免覆盖发送按钮等样式 */
  .right { display: block; }
  .right > * { width: 100%; }
  
  /* 抽屉质感提升 */
  .drawer {
    border-top-left-radius: 12px;
    border-bottom-left-radius: 12px;
    backdrop-filter: saturate(1.06) blur(8px);
    box-shadow: -12px 0 24px rgba(0,0,0,.08);
  }
  .drawer-header {
    background: linear-gradient(180deg, var(--card), color-mix(in oklab, var(--card), #000 4%));
  }
  .frag-item {
    background: var(--card);
    border-radius: 12px;
    box-shadow: 0 4px 16px rgba(0,0,0,.04);
  }
  .frag-item .desc { font-size: 14px; }
  
  /* 轻动画与无障碍 */
  .memory-item,
  .ghost-btn,
  .drawer {
    will-change: transform, opacity;
  }
  .ghost-btn:focus-visible,
  .theme-option:focus-visible,
  .theme-toggle:focus-visible {
    outline: 2px solid var(--brand);
    outline-offset: 2px;
  }
  
  /* 响应式 */
  @media (max-width: 1024px) {
    .memories-page { grid-template-columns: 1fr; gap: 12px; }
    .right :deep(.chat-list) { max-height: 42vh; }
  }
  
  /* 拖拽分割线样式与容器拉伸 */
  .split-resizer {
    width: 6px;
    background: var(--line);
    border-radius: 6px;
    cursor: col-resize;
    position: relative;
    align-self: stretch;
  }
  .split-resizer::before {
    content: '';
    position: absolute;
    top: 0; bottom: 0;
    left: -6px; right: -6px; /* 扩大可点击/触控区域 */
  }
  .split-resizer:hover,
  .split-resizer.active {
    background: #cfe8dc;
  }
  @media (prefers-color-scheme: dark) {
    .split-resizer:hover,
    .split-resizer.active {
      background: color-mix(in oklab, var(--line), var(--brand) 30%);
    }
  }
  
  /* 容器拉伸与滚动优化 */
  .memories-page { align-items: stretch; }
  .left, .right { min-width: 0; overflow: auto; }